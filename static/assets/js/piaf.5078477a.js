(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["piaf"],{"336b":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("vue-perfect-scrollbar",{staticClass:"scroll",attrs:{settings:{suppressScrollX:!0,wheelPropagation:!1}}},[s("div",{staticClass:"pt-0 spaced-content pb-0"},t._l(t.conversations,(function(e,n){return s("div",{key:"conversation"+n,staticClass:"d-flex flex-row mb-1 border-bottom pb-3"},[s("a",{staticClass:"d-flex",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.selectConversation(e)}}},[s("img",{staticClass:"img-thumbnail border-0 rounded-circle mr-3 list-thumbnail align-self-center xsmall",attrs:{alt:t.otherUser(e.users).title,src:t.otherUser(e.users).img}}),t._v(" "),s("div",{staticClass:"d-flex flex-grow-1 min-width-zero"},[s("div",{staticClass:"pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero"},[s("div",{staticClass:"min-width-zero"},[s("p",{staticClass:"mb-0 truncate"},[t._v(t._s(t.otherUser(e.users).title))]),t._v(" "),s("p",{staticClass:"mb-1 text-muted text-small"},[t._v(t._s(e.lastMessageTime))])])])])])])})),0)])},i=[],a=(s("7db0"),{props:["conversations","contacts","currentUser"],methods:{selectConversation:function(t){var e=this.otherUser(t.users);this.$emit("select-conversation",e,t.messages)},otherUser:function(t){var e=this,s=t.find((function(t){return t!==e.currentUser.id}));return this.contacts.find((function(t){return t.id===s}))}},computed:{},mounted:function(){this.selectConversation(this.conversations[0])}}),r=a,o=s("2877"),c=Object(o["a"])(r,n,i,!1,null,null,null);e["a"]=c.exports},"4cf0":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{"app-menu":!0,shown:t.isOpen},on:{mouseenter:function(e){t.isMenuOver=!0},mouseleave:function(e){t.isMenuOver=!1}}},[t._t("default"),t._v(" "),s("a",{staticClass:"app-menu-button d-inline-block d-xl-none",on:{click:function(e){return e.preventDefault(),t.toggle(e)}}},[s("i",{staticClass:"simple-icon-options"})])],2)},i=[],a=s("5118"),r={data:function(){return{isOpen:!1,isMenuOver:!1}},methods:{addEvents:function(){document.addEventListener("click",this.handleDocumentClick),document.addEventListener("touchstart",this.handleDocumentClick)},removeEvents:function(){document.removeEventListener("click",this.handleDocumentClick),document.removeEventListener("touchstart",this.handleDocumentClick)},handleDocumentClick:function(t){this.isMenuOver||this.toggle()},toggle:function(){this.isOpen=!this.isOpen}},watch:{isOpen:function(t){var e=this;t?(Object(a["setTimeout"])((function(){e.$emit("show")}),300),this.addEvents()):this.removeEvents()}},beforeDestroy:function(){this.removeEvents()}},o=r,c=s("2877"),l=Object(c["a"])(o,n,i,!1,null,null,null);e["a"]=l.exports},"503c":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"d-flex flex-row chat-heading"},[s("div",{staticClass:"d-flex"},[s("img",{staticClass:"img-thumbnail border-0 rounded-circle ml-0 mr-4 list-thumbnail align-self-center small",attrs:{alt:t.otherUser.title,src:t.otherUser.img}})]),t._v(" "),s("div",{staticClass:"d-flex min-width-zero"},[s("div",{staticClass:"card-body pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero"},[s("div",{staticClass:"min-width-zero"},[s("div",[s("p",{staticClass:"list-item-heading mb-1 truncate"},[t._v("\n              "+t._s(t.otherUser.title)+"\n            ")])]),t._v(" "),s("p",{staticClass:"mb-0 text-muted text-small"},[t._v(t._s(t.otherUser.date))])])])])]),t._v(" "),s("div",{staticClass:"separator mb-5"}),t._v(" "),s("vue-perfect-scrollbar",{ref:"chatArea",staticClass:"scroll",attrs:{settings:{suppressScrollX:!0,wheelPropagation:!1}}},t._l(t.messages,(function(e,n){return s("div",{key:"message"+n},[s("b-card",{class:{"d-inline-block mb-3":!0,"float-left":e.sender===t.otherUser.id,"float-right":e.sender===t.currentUser.id},attrs:{"no-body":""}},[s("div",{staticClass:"position-absolute pt-1 pr-2 r-0"},[s("span",{staticClass:"text-extra-small text-muted"},[t._v(t._s(e.time))])]),t._v(" "),s("b-card-body",[e.sender===t.currentUser.id?s("div",{staticClass:"d-flex flex-row pb-1"},[s("img",{staticClass:"img-thumbnail border-0 rounded-circle mr-3 list-thumbnail align-self-center xsmall",attrs:{alt:t.currentUser.title,src:t.currentUser.img}}),t._v(" "),s("div",{staticClass:"d-flex flex-grow-1 min-width-zero"},[s("div",{staticClass:"m-2 pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero"},[s("div",{staticClass:"min-width-zero"},[s("p",{staticClass:"mb-0 truncate list-item-heading"},[t._v("\n                    "+t._s(t.currentUser.title)+"\n                  ")])])])])]):s("div",{staticClass:"d-flex flex-row pb-1"},[s("img",{staticClass:"img-thumbnail border-0 rounded-circle mr-3 list-thumbnail align-self-center xsmall",attrs:{alt:t.otherUser.title,src:t.otherUser.img}}),t._v(" "),s("div",{staticClass:"d-flex flex-grow-1 min-width-zero"},[s("div",{staticClass:"m-2 pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero"},[s("div",{staticClass:"min-width-zero"},[s("p",{staticClass:"mb-0 truncate list-item-heading"},[t._v("\n                    "+t._s(t.otherUser.title)+"\n                  ")])])])])]),t._v(" "),s("div",{staticClass:"chat-text-left"},[s("p",{staticClass:"mb-0 text-semi-muted"},[t._v(t._s(e.text))])])])],1),t._v(" "),s("div",{staticClass:"clearfix"})],1)})),0)],1)},i=[],a={props:["currentUser","otherUser","messages"],methods:{scrollToEnd:function(){var t=this;setTimeout((function(){var e=t.$refs.chatArea.$el;e.scrollTop=e.scrollHeight}),0)}},mounted:function(){this.scrollToEnd()},updated:function(){this.scrollToEnd()}},r=a,o=s("2877"),c=Object(o["a"])(r,n,i,!1,null,null,null);e["a"]=c.exports},5118:function(t,e,s){(function(t){var n="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function a(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new a(i.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new a(i.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},s("6017"),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,s("c8ba"))},6017:function(t,e,s){(function(t,e){(function(t,s){"use strict";if(!t.setImmediate){var n,i=1,a={},r=!1,o=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?m():v()?h():t.MessageChannel?p():o&&"onreadystatechange"in o.createElement("script")?g():b(),c.setImmediate=l,c.clearImmediate=u}function l(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),s=0;s<e.length;s++)e[s]=arguments[s+1];var r={callback:t,args:e};return a[i]=r,n(i),i++}function u(t){delete a[t]}function d(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(s,n);break}}function f(t){if(r)setTimeout(f,0,t);else{var e=a[t];if(e){r=!0;try{d(e)}finally{u(t),r=!1}}}}function m(){n=function(t){e.nextTick((function(){f(t)}))}}function v(){if(t.postMessage&&!t.importScripts){var e=!0,s=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=s,e}}function h(){var e="setImmediate$"+Math.random()+"$",s=function(s){s.source===t&&"string"===typeof s.data&&0===s.data.indexOf(e)&&f(+s.data.slice(e.length))};t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),n=function(s){t.postMessage(e+s,"*")}}function p(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;f(e)},n=function(e){t.port2.postMessage(e)}}function g(){var t=o.documentElement;n=function(e){var s=o.createElement("script");s.onreadystatechange=function(){f(e),s.onreadystatechange=null,t.removeChild(s),s=null},t.appendChild(s)}}function b(){n=function(t){setTimeout(f,0,t)}}})("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,s("c8ba"),s("4362"))},"7db0":function(t,e,s){"use strict";var n=s("23e7"),i=s("b727").find,a=s("44d2"),r="find",o=!0;r in[]&&Array(1)[r]((function(){o=!1})),n({target:"Array",proto:!0,forced:o},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a(r)},a0d8:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-row",{staticClass:"app-row"},[s("b-colxx",{staticClass:"chat-app",attrs:{xxs:"12"}},[t.isLoadContacts&&t.isLoadConversations&&null!=t.otherUser?s("conversation-detail",{key:"conversation",attrs:{"current-user":t.currentUser,"other-user":t.otherUser,messages:t.conversationMessages}}):s("div",{key:"conversationLoading",staticClass:"loading"})],1)],1),t._v(" "),s("div",{staticClass:"chat-input-container d-flex justify-content-between align-items-center"},[s("b-input",{staticClass:"flex-grow-1",attrs:{type:"text",placeholder:t.$t("chat.saysomething")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMessage(e)}},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),t._v(" "),s("div",[s("b-button",{staticClass:"icon-button large ml-1",attrs:{variant:"primary"},on:{click:t.sendMessage}},[s("i",{staticClass:"simple-icon-arrow-right"})])],1)],1),t._v(" "),s("application-menu",[s("b-tabs",{staticClass:"pl-0 pr-0 h-100",attrs:{"no-fade":"","content-class":"chat-app-tab-content","nav-class":"card-header-tabs ml-0 mr-0"},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[s("b-tab",{staticClass:"chat-app-tab-pane",attrs:{title:t.$t("chat.messages"),active:"","title-item-class":"w-50 text-center","no-body":""}},[s("div",{staticClass:"pt-4 spaced-content pb-0 mt-2"}),t._v(" "),t.isLoadContacts&&t.isLoadConversations?s("conversation-list",{key:"conversationList",attrs:{"current-user":t.currentUser,conversations:t.conversations,contacts:t.contacts},on:{"select-conversation":t.selectConversation}}):s("div",{key:"conversationListLoading",staticClass:"loading"})],1),t._v(" "),s("b-tab",{staticClass:"chat-app-tab-pane",attrs:{title:t.$t("chat.contacts"),"title-item-class":"w-50 text-center","no-body":""}},[s("div",{staticClass:"pt-4 spaced-content pb-0 mt-2"},[s("div",{staticClass:"form-group"})]),t._v(" "),t.isLoadContacts?s("contact-list",{key:"contactList",attrs:{data:t.contactsSearchResult},on:{"select-contact":t.selectContact}}):s("div",{key:"contactListLoading",staticClass:"loading"})],1)],1)],1)],1)},i=[],a=(s("a4d3"),s("4de4"),s("7db0"),s("caad"),s("a434"),s("e439"),s("dbb4"),s("b64b"),s("2532"),s("159b"),s("ade3")),r=s("2f62"),o=s("4cf0"),c=s("ace4"),l=s("336b"),u=s("503c");function d(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function f(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?d(Object(s),!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var m={components:{"application-menu":o["a"],"contact-list":c["a"],"conversation-list":l["a"],"conversation-detail":u["a"]},data:function(){return{tabIndex:0,message:"",searchKey:"",isLoadCurrentConversation:!1,otherUser:null,conversationMessages:null}},computed:f({},Object(r["c"])(["currentUser","isLoadContacts","isLoadConversations","error","contacts","contactsSearchResult","conversations"])),methods:f({},Object(r["b"])(["getContacts","searchContacts","getConversations"]),{selectConversation:function(t,e){this.otherUser=t,this.conversationMessages=e},selectContact:function(t){var e=this;this.otherUser=this.contacts.find((function(e){return e.id===t}));var s=this.conversations.find((function(s){return s.users.includes(t)&&s.users.includes(e.currentUser.id)}));if(s)console.log("change selected conversation"),this.conversationMessages=s.messages;else{console.log("create new conversation");var n=new Date;this.conversations.splice(0,0,{users:[t,this.currentUser.id],messages:[],lastMessageTime:n.getHours()+":"+n.getMinutes()}),this.conversationMessages=[]}this.tabIndex=0,this.message="",this.searchKey=""},sendMessage:function(){console.log("add message to conversation");var t=new Date;this.conversationMessages.push({sender:this.currentUser.id,text:this.message,time:t.getHours()+":"+t.getMinutes()}),this.message=""}}),mounted:function(){this.getContacts({userId:this.currentUser.id,searchKey:""}),this.getConversations(this.currentUser.id),document.body.classList.add("no-footer")},beforeDestroy:function(){document.body.classList.remove("no-footer")},watch:{searchKey:function(t,e){this.searchContacts({userId:this.currentUser.id,searchKey:t})}}},v=m,h=s("2877"),p=Object(h["a"])(v,n,i,!1,null,null,null);e["default"]=p.exports},a434:function(t,e,s){"use strict";var n=s("23e7"),i=s("23cb"),a=s("a691"),r=s("50c4"),o=s("7b0b"),c=s("65f0"),l=s("8418"),u=s("1dde"),d=Math.max,f=Math.min,m=9007199254740991,v="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!u("splice")},{splice:function(t,e){var s,n,u,h,p,g,b=o(this),C=r(b.length),x=i(t,C),y=arguments.length;if(0===y?s=n=0:1===y?(s=0,n=C-x):(s=y-2,n=f(d(a(e),0),C-x)),C+s-n>m)throw TypeError(v);for(u=c(b,n),h=0;h<n;h++)p=x+h,p in b&&l(u,h,b[p]);if(u.length=n,s<n){for(h=x;h<C-n;h++)p=h+n,g=h+s,p in b?b[g]=b[p]:delete b[g];for(h=C;h>C-n+s;h--)delete b[h-1]}else if(s>n)for(h=C-n;h>x;h--)p=h+n-1,g=h+s-1,p in b?b[g]=b[p]:delete b[g];for(h=0;h<s;h++)b[h+x]=arguments[h+2];return b.length=C-n+s,u}})},ace4:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("vue-perfect-scrollbar",{attrs:{settings:{suppressScrollX:!0,wheelPropagation:!1}}},[s("div",{staticClass:"pt-0 spaced-content pb-0"},t._l(t.data,(function(e,n){return s("div",{key:"contact"+n,staticClass:"d-flex flex-row mb-3 border-bottom pb-3"},[s("a",{staticClass:"d-flex",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.selectContact(e.id)}}},[s("img",{staticClass:"img-thumbnail border-0 rounded-circle mr-3 list-thumbnail align-self-center xsmall",attrs:{alt:e.title,src:e.img}}),t._v(" "),s("div",{staticClass:"d-flex flex-grow-1 min-width-zero"},[s("div",{staticClass:"pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero"},[s("div",{staticClass:"min-width-zero"},[s("p",{staticClass:" mb-0 truncate"},[t._v(t._s(e.username))])])])])])])})),0)])},i=[],a={props:["data"],methods:{selectContact:function(t){this.$emit("select-contact",t)}}},r=a,o=s("2877"),c=Object(o["a"])(r,n,i,!1,null,null,null);e["a"]=c.exports},eff6:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("router-view")},i=[],a=s("2877"),r={},o=Object(a["a"])(r,n,i,!1,null,null,null);e["default"]=o.exports}}]);